{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// import * as renderFunction from './render-functions.js';\nfunction getImagesByQuery(query, page) {\n  // renderFunction.showLoader();\n  return axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        key: '40329359-a15cc1b2c03eb2718994197fd',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    })\n    .then(response => {\n      const images = response.data.hits;\n      if (!images || images.length === 0) {\n        iziToast.error({\n          close: false,\n          progressBar: false,\n          timeout: 3000,\n          pauseOnHover: false,\n          position: 'topRight',\n          color: 'red',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return [];\n      }\n      return images;\n    })\n    .catch(error => {\n      console.log(error);\n      iziToast.error({\n        close: false,\n        progressBar: false,\n        timeout: 3000,\n        pauseOnHover: false,\n        position: 'topRight',\n        message: 'Something went wrong. Please try again later.',\n      });\n      return [];\n    });\n  // .finally(() => {\n  //   renderFunction.hideLoader();\n  // });\n}\nexport { getImagesByQuery };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst userList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n// const loaderBottom = document.querySelector('.loader-bottom');\nconst loadMore = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport function createGallery(images) {\n  const markup = images\n    .map(images => {\n      return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${images.largeImageURL}\">\n    <img \n      class=\"gallery-image\" \n      src=\"${images.largeImageURL}\" \n      alt=\"${images.tags}\" \n    />\n        <ul class=\"stats\">\n    <li class=\"stats-item\">Likes <p>${images.likes}</p>\n    </li>\n    <li class=\"stats-item\">Views <p>${images.views}</p>\n    </li>\n    <li class=\"stats-item\">Comments <p>${images.comments}</p>\n    </li>\n    <li class=\"stats-item\">Downloads <p>${images.downloads}</p>\n    </li>\n  </ul>\n  </a>\n  \n\n</li>\n`;\n    })\n    .join('');\n  userList.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  if (userList && userList.children.length > 0) {\n    userList.innerHTML = '';\n  }\n}\nexport function showLoader() {\n  loader.style.display = 'block';\n}\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMore.style.display = 'block';\n}\nexport function hideLoadMoreButton() {\n  loadMore.style.display = 'none';\n}\n","import * as pixabayApi from './js/pixabay-api.js';\nimport * as renderFunction from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst form = document.querySelector('.form');\nconst userQuery = document.querySelector(\"input[name='search-text']\");\nconst loadMoreBtn = document.querySelector('.load-more');\nlet userQueryTrim = '';\nlet userPage = 1;\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  userQueryTrim = userQuery.value.trim();\n  renderFunction.hideLoadMoreButton();\n  renderFunction.clearGallery();\n  if (!userQueryTrim) {\n    iziToast.warning({\n      close: false,\n      progressBar: false,\n      timeout: 3000,\n      pauseOnHover: false,\n      position: 'topRight',\n      color: 'yellow',\n      message: 'Enter text to search for',\n    });\n    return;\n  }\n  renderFunction.showLoader();\n  pixabayApi\n    .getImagesByQuery(userQueryTrim)\n    .then(images => {\n      if (images && images.length > 0) {\n        renderFunction.createGallery(images);\n        renderFunction.showLoadMoreButton();\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n        position: 'topRight',\n      });\n      console.error(error);\n    })\n    .finally(() => {\n      renderFunction.hideLoader();\n    });\n});\nloadMoreBtn.addEventListener('click', () => {\n  renderFunction.hideLoadMoreButton();\n  renderFunction.showLoader();\n  let limit = 15;\n  const totalPage = Math.ceil(200 / limit);\n  if (userPage > totalPage) {\n    renderFunction.hideLoader();\n    return iziToast.error({\n      close: false,\n      progressBar: false,\n      timeout: 3000,\n      pauseOnHover: false,\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n  userPage += 1;\n  pixabayApi\n    .getImagesByQuery(userQueryTrim, userPage)\n    .then(images => {\n      if (images && images.length > 0) {\n        renderFunction.createGallery(images, userPage);\n        const firstCard = document.querySelector('.gallery-item');\n        if (firstCard) {\n          const cardHeight = firstCard.getBoundingClientRect().height;\n          window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n          });\n        }\n        renderFunction.showLoadMoreButton();\n      }\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n        position: 'topRight',\n      });\n      console.error(error);\n    })\n    .finally(() => {\n      renderFunction.hideLoader();\n    });\n});\n"],"names":["getImagesByQuery","query","page","axios","response","images","iziToast","error","userList","loader","loadMore","lightbox","SimpleLightbox","createGallery","markup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","userQuery","loadMoreBtn","userQueryTrim","userPage","e","renderFunction.hideLoadMoreButton","renderFunction.clearGallery","renderFunction.showLoader","pixabayApi\n    .getImagesByQuery","renderFunction.createGallery","renderFunction.showLoadMoreButton","renderFunction.hideLoader","totalPage","firstCard","cardHeight"],"mappings":"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"}