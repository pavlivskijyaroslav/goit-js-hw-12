{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nasync function getImagesByQuery(query, page) {\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '40329359-a15cc1b2c03eb2718994197fd',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.log(error);\n  }\n}\nexport { getImagesByQuery };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst userList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nexport function createGallery(images, page) {\n  const markup = images\n    .map(images => {\n      return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${images.largeImageURL}\">\n    <img \n      class=\"gallery-image\" \n      src=\"${images.largeImageURL}\" \n      alt=\"${images.tags}\" \n    />\n        <ul class=\"stats\">\n    <li class=\"stats-item\">Likes <p>${images.likes}</p>\n    </li>\n    <li class=\"stats-item\">Views <p>${images.views}</p>\n    </li>\n    <li class=\"stats-item\">Comments <p>${images.comments}</p>\n    </li>\n    <li class=\"stats-item\">Downloads <p>${images.downloads}</p>\n    </li>\n  </ul>\n  </a>\n  \n\n</li>\n`;\n    })\n    .join('');\n  if (page === 1) {\n    userList.innerHTML = markup;\n  } else {\n    userList.insertAdjacentHTML('beforeend', markup);\n  }\n\n  lightbox.refresh();\n}\nexport function clearGallery() {\n  if (userList && userList.children.length > 0) {\n    userList.innerHTML = '';\n  }\n}\nexport function showLoader() {\n  loader.style.display = 'block';\n}\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  loadMore.style.display = 'block';\n}\nexport function hideLoadMoreButton() {\n  loadMore.style.display = 'none';\n}\n","import * as pixabayApi from './js/pixabay-api.js';\nimport * as renderFunction from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst userQuery = document.querySelector(\"input[name='search-text']\");\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet userQueryTrim = '';\nlet userPage = 1;\nlet totalPages = 0;\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  userQueryTrim = userQuery.value.trim();\n  userPage = 1;\n  totalPages = 0;\n  renderFunction.hideLoadMoreButton();\n  renderFunction.clearGallery();\n\n  if (!userQueryTrim) {\n    iziToast.warning({\n      close: false,\n      progressBar: false,\n      timeout: 3000,\n      pauseOnHover: false,\n      position: 'topRight',\n      color: 'yellow',\n      message: 'Enter text to search for',\n    });\n    return;\n  }\n\n  renderFunction.showLoader();\n\n  try {\n    const response = await pixabayApi.getImagesByQuery(userQueryTrim, userPage);\n    const images = response.hits;\n    const totalHits = response.totalHits;\n\n    if (images.length === 0) {\n      iziToast.info({\n        close: false,\n        progressBar: false,\n        timeout: 3000,\n        pauseOnHover: false,\n        position: 'topRight',\n        color: 'yellow',\n        message: 'No images found. Try another search.',\n        position: 'topRight',\n      });\n      return;\n    }\n    renderFunction.createGallery(images, userPage);\n\n    const perPage = 15;\n    totalPages = Math.ceil(totalHits / perPage);\n    if (userPage >= totalPages) {\n      iziToast.info({\n        close: false,\n        progressBar: false,\n        timeout: 3000,\n        pauseOnHover: false,\n        position: 'topRight',\n        color: 'blue',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      renderFunction.hideLoadMoreButton();\n    } else {\n      renderFunction.showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  } finally {\n    renderFunction.hideLoader();\n  }\n});\nloadMoreBtn.addEventListener('click', async () => {\n  userPage += 1;\n  renderFunction.hideLoadMoreButton();\n  renderFunction.showLoader();\n\n  try {\n    const response = await pixabayApi.getImagesByQuery(userQueryTrim, userPage);\n    const images = response.hits;\n    renderFunction.createGallery(images, userPage);\n\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n    if (userPage >= totalPages) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      renderFunction.hideLoadMoreButton();\n    } else {\n      renderFunction.showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n    console.error(error);\n  } finally {\n    renderFunction.hideLoader();\n  }\n});\n"],"names":["getImagesByQuery","query","page","response","axios","error","userList","loader","loadMore","lightbox","SimpleLightbox","createGallery","images","markup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","userQuery","loadMoreBtn","userQueryTrim","userPage","totalPages","e","renderFunction.hideLoadMoreButton","renderFunction.clearGallery","iziToast","renderFunction.showLoader","pixabayApi.getImagesByQuery","totalHits","renderFunction.createGallery","renderFunction.showLoadMoreButton","renderFunction.hideLoader","firstCard","cardHeight"],"mappings":"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"}